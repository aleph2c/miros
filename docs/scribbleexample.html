
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Hacking to Learn &#8212; miros 2.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Interacting Statecharts (Same Machine)" href="interactingcharts.html" />
    <link rel="prev" title="Thread Safe Attributes" href="thread_safe_attributes.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <blockquote>
<div><p><em>What I learned on my own I still remember</em></p>
<p class="attribution">&mdash;Nassim Nicholas Taleb</p>
</div></blockquote>
<div class="section" id="hacking-to-learn">
<span id="scribbleexample-hacking-to-learn-the-deeper-dynamics"></span><h1>Hacking to Learn<a class="headerlink" href="#hacking-to-learn" title="Permalink to this headline">¶</a></h1>
<p id="scribbleexample-first-pass">In this example I ask a small question about a statechart.  Then we will:</p>
<ol class="arabic simple">
<li>try to answer the question</li>
<li>build the chart in working code</li>
<li>test out our answer</li>
<li>learn something</li>
</ol>
<div class="section" id="a-picture-and-a-question">
<h2>A Picture and a Question<a class="headerlink" href="#a-picture-and-a-question" title="Permalink to this headline">¶</a></h2>
<img alt="_images/scribble.svg" src="_images/scribble.svg" /><p>Suppose we started the above chart in <code class="docutils literal notranslate"><span class="pre">s11</span></code>, then we send a <code class="docutils literal notranslate"><span class="pre">T</span></code> event to it,
when would each of the functions, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">t</span></code> happen?</p>
<p>If you are unfamiliar with UML, this part of the diagram:</p>
<a class="reference external image-reference" href="_static/guard.pdf"><div align="center" class="align-center"><img alt="_images/guard.svg" src="_images/guard.svg" /></div>
</a>
<p>contains a <strong>guard</strong>.  Specifically, the code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">g</span><span class="p">()]</span>
</pre></div>
</div>
<p>on the arrow is the <strong>guard</strong>.</p>
<p>It is shorthand for: <cite>if the logic between the square brackets is True then let
the event on the arrow pass through</cite>.  The code that is after the guard on the
diagram, <code class="docutils literal notranslate"><span class="pre">t()</span></code>, runs if the guard doesn’t block it.  Now that we know how a
guard works, we can infer that:</p>
<a class="reference external image-reference" href="_static/guard2.pdf"><div align="center" class="align-center"><img alt="_images/guard2.svg" src="_images/guard2.svg" /></div>
</a>
<p>means:</p>
<ol class="arabic simple">
<li>When I see a <cite>T</cite> event, ask for permission from the guard to see if it can pass.</li>
<li>The <cite>g</cite> function is the guard</li>
<li>If <cite>g</cite> returns True, <cite>T</cite> can pass; it can run the <cite>t</cite> function then make the transition to state <cite>s2</cite> <a class="footnote-reference" href="#f1" id="id1">[1]</a>.</li>
<li>If <cite>g</cite> returns False the <cite>T</cite> event is ignored by the chart.</li>
</ol>
</div>
<div class="section" id="a-partial-answer">
<h2>A Partial Answer<a class="headerlink" href="#a-partial-answer" title="Permalink to this headline">¶</a></h2>
<p>Now that we understand that, let’s re-ask the question:</p>
<p>“Suppose we started the above chart in <code class="docutils literal notranslate"><span class="pre">s11</span></code>, then we send a <code class="docutils literal notranslate"><span class="pre">T</span></code> event to it,
when would each of the functions, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">t</span></code> happen?”</p>
<a class="reference external image-reference" href="_static/scribble.pdf"><div align="center" class="align-center"><img alt="_images/scribble.svg" src="_images/scribble.svg" /></div>
</a>
<p>Well, if we start in <code class="docutils literal notranslate"><span class="pre">s11</span></code>, then we receive a <code class="docutils literal notranslate"><span class="pre">T</span></code>, <code class="docutils literal notranslate"><span class="pre">s11</span></code> wouldn’t know
what to do with <code class="docutils literal notranslate"><span class="pre">T</span></code>, so it would pass it out to <code class="docutils literal notranslate"><span class="pre">s1</span></code>.  <code class="docutils literal notranslate"><span class="pre">s1</span></code> <em>does know</em>
what to do with <code class="docutils literal notranslate"><span class="pre">T</span></code>, it would try to pass it to <code class="docutils literal notranslate"><span class="pre">s2</span></code>.</p>
<p>Ok, now how do we get from <code class="docutils literal notranslate"><span class="pre">s11</span></code> to <code class="docutils literal notranslate"><span class="pre">s2</span></code>?  We need to exit, <code class="docutils literal notranslate"><span class="pre">s11</span></code>,
then we need to exit <code class="docutils literal notranslate"><span class="pre">s1</span></code> then we need to enter <code class="docutils literal notranslate"><span class="pre">s2</span></code>.  Oh, and don’t forget
to run <code class="docutils literal notranslate"><span class="pre">g</span></code> and <code class="docutils literal notranslate"><span class="pre">t</span></code> on the <code class="docutils literal notranslate"><span class="pre">T</span></code> event.  Here is a working theory:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">a</span></code> will run because <code class="docutils literal notranslate"><span class="pre">s11</span></code> needs to be exited.</li>
<li><code class="docutils literal notranslate"><span class="pre">b</span></code> will run because <code class="docutils literal notranslate"><span class="pre">s1</span></code> needs to be exited.</li>
<li><code class="docutils literal notranslate"><span class="pre">g</span></code> will run because it is the guard for the <cite>T</cite> event between the <code class="docutils literal notranslate"><span class="pre">s1</span></code> and <code class="docutils literal notranslate"><span class="pre">s2</span></code> states.</li>
<li><code class="docutils literal notranslate"><span class="pre">t</span></code> will run (assuming that <code class="docutils literal notranslate"><span class="pre">g</span></code> returned true)</li>
<li><code class="docutils literal notranslate"><span class="pre">c</span></code> will run because <code class="docutils literal notranslate"><span class="pre">s2</span></code> needs to be entered.</li>
</ol>
</div>
<div class="section" id="a-better-answer">
<h2>A Better Answer<a class="headerlink" href="#a-better-answer" title="Permalink to this headline">¶</a></h2>
<p>Now that we have a partial answer, let’s re-ask the question:</p>
<p>“Suppose we started the above chart in <code class="docutils literal notranslate"><span class="pre">s11</span></code>, then we send a <code class="docutils literal notranslate"><span class="pre">T</span></code> event to it,
when would each of the functions, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">t</span></code> happen?”</p>
<a class="reference external image-reference" href="_static/scribble.pdf"><div align="center" class="align-center"><img alt="_images/scribble.svg" src="_images/scribble.svg" /></div>
</a>
<p>If we look at the <code class="docutils literal notranslate"><span class="pre">s2</span></code> state, we see that it has an initialization event
(black dot) with another function <code class="docutils literal notranslate"><span class="pre">d</span></code> hanging on it .  After <code class="docutils literal notranslate"><span class="pre">s2</span></code> is
entered, we would expect the next thing to be a transition into the <code class="docutils literal notranslate"><span class="pre">s21</span></code>
state, but first we would run the <code class="docutils literal notranslate"><span class="pre">d</span></code> function on the arrow tied to the black
dot, since it is outside of the <code class="docutils literal notranslate"><span class="pre">s21</span></code> state and we haven’t entered it yet.
Let’s add this to our working theory:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">a</span></code> will run because <code class="docutils literal notranslate"><span class="pre">s11</span></code> needs to be exited.</li>
<li><code class="docutils literal notranslate"><span class="pre">b</span></code> will run because <code class="docutils literal notranslate"><span class="pre">s1</span></code> needs to be exited.</li>
<li><code class="docutils literal notranslate"><span class="pre">g</span></code> will run because it is the guard for the <cite>T</cite> event between the <code class="docutils literal notranslate"><span class="pre">s1</span></code> and <code class="docutils literal notranslate"><span class="pre">s2</span></code> states.</li>
<li><code class="docutils literal notranslate"><span class="pre">t</span></code> will run (assuming that <code class="docutils literal notranslate"><span class="pre">g</span></code> returned true)</li>
<li><code class="docutils literal notranslate"><span class="pre">c</span></code> will run because <code class="docutils literal notranslate"><span class="pre">s2</span></code> needs to be entered.</li>
<li><code class="docutils literal notranslate"><span class="pre">d</span></code> will run on the init transition event from <code class="docutils literal notranslate"><span class="pre">s2</span></code> to <code class="docutils literal notranslate"><span class="pre">s21</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">e</span></code> will run because the <code class="docutils literal notranslate"><span class="pre">s21</span></code> needs to be entered.</li>
</ol>
</div>
<div class="section" id="our-first-working-hypothesis">
<h2>Our First Working Hypothesis<a class="headerlink" href="#our-first-working-hypothesis" title="Permalink to this headline">¶</a></h2>
<p>“Suppose we started the above chart in <code class="docutils literal notranslate"><span class="pre">s11</span></code>, then we send a <code class="docutils literal notranslate"><span class="pre">T</span></code> event to it,
when would each of the functions, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">t</span></code> happen?”</p>
<a class="reference external image-reference" href="_static/scribble.pdf"><div align="center" class="align-center"><img alt="_images/scribble.svg" src="_images/scribble.svg" /></div>
</a>
<p>Ok, our thinking is a bit clearer now but let’s tighten up our answer.  There are
actually two parts, because the guard can return True or False.  We will start with the
easy part of the answer, then explain the longer part of the answer:</p>
<ol class="arabic simple">
<li>If g() returns False, none of the functions are called.</li>
<li>If g() returns True, then…  wait <code class="docutils literal notranslate"><span class="pre">g</span></code> had to be called first? Hmm.. whatever, here is
my theory so far:  <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>.  It is
easy to answer this way because my eyes work that way when I’m looking at
the picture.</li>
</ol>
<p>But, there is something nagging at me now: <code class="docutils literal notranslate"><span class="pre">g</span></code> had to be called first, otherwise
my answer doesn’t really make any sense.  So, here is my answer:</p>
<ol class="arabic simple">
<li>If g() returns False, only <code class="docutils literal notranslate"><span class="pre">g</span></code> is called</li>
<li>If g() returns True, then <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>.</li>
</ol>
<p>We have our theory, but we are hackers not philosophers.  We have more work to
do.  Hackers ruthlessly deploy the scientific method to seek understanding
about things they care about.  Hackers do four hard things over and over again:</p>
<ol class="arabic simple">
<li>Think.</li>
<li>Move past technical boundaries</li>
<li>Destroy their own theories by seeking contrary evidence.</li>
<li>Learn from their mistakes</li>
</ol>
<p>Now that I think I understand how the statechart works, I have performed the
first thing on the list.  To try and disprove my theory, I will need to build
up the statechart in the diagram and actually see what happens.</p>
</div>
<div class="section" id="code-make-a-picture">
<span id="scribbleexample-from-diagram-to-code-first-pass"></span><h2>Code, Make a Picture<a class="headerlink" href="#code-make-a-picture" title="Permalink to this headline">¶</a></h2>
<p>To begin with I will draw the picture in the code, so that as I work I can see
what I’m trying to build:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">+----------------------------- s -------------------------------+</span>
<span class="sd">| +-------- s1 ---------+                 +-------- s2 -------+ |</span>
<span class="sd">| | exit / b()          |                 | entry / c()       | |</span>
<span class="sd">| |    +--- s11 ----+   |                 |  +---- s21 -----+ | |</span>
<span class="sd">| |    | exit / a() |   |                 |  | entry / e()  | | |</span>
<span class="sd">| |    |            |   |                 |  |              | | |</span>
<span class="sd">| |    |            |   +- T [g()] / t() -&gt;  |              | | |</span>
<span class="sd">| |    +------------+   |                 |  +-----------/--+ | |</span>
<span class="sd">| |                     |                 |   *-- / d() -+    | |</span>
<span class="sd">| +---------------------+                 +-------------------+ |</span>
<span class="sd">+---------------------------------------------------------------+</span>

<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="code-required-imports">
<span id="scribbleexample-from-diagram-to-code-second-pass"></span><h2>Code, Required Imports<a class="headerlink" href="#code-required-imports" title="Permalink to this headline">¶</a></h2>
<p>Now I’ll import the items I’ll need to run my experiment:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">+----------------------------- s -------------------------------+</span>
<span class="sd">| +-------- s1 ---------+                 +-------- s2 -------+ |</span>
<span class="sd">| | exit / b()          |                 | entry / c()       | |</span>
<span class="sd">| |    +--- s11 ----+   |                 |  +---- s21 -----+ | |</span>
<span class="sd">| |    | exit / a() |   |                 |  | entry / e()  | | |</span>
<span class="sd">| |    |            |   |                 |  |              | | |</span>
<span class="sd">| |    |            |   +- T [g()] / t() -&gt;  |              | | |</span>
<span class="sd">| |    +------------+   |                 |  +-----------/--+ | |</span>
<span class="sd">| |                     |                 |   *-- / d() -+    | |</span>
<span class="sd">| +---------------------+                 +-------------------+ |</span>
<span class="sd">+---------------------------------------------------------------+</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="hll"><span class="kn">import</span> <span class="nn">time</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">spy_on</span><span class="p">,</span> <span class="n">pp</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">ActiveObject</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">signals</span><span class="p">,</span> <span class="n">Event</span><span class="p">,</span> <span class="n">return_status</span>
</span></pre></div>
</div>
</div>
<div class="section" id="code-frame-in-the-states">
<span id="scribbleexample-from-diagram-to-code-third-pass"></span><h2>Code, Frame in the States<a class="headerlink" href="#code-frame-in-the-states" title="Permalink to this headline">¶</a></h2>
<p>Now I will frame in the state methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">+----------------------------- s -------------------------------+</span>
<span class="sd">| +-------- s1 ---------+                 +-------- s2 -------+ |</span>
<span class="sd">| | exit / b()          |                 | entry / c()       | |</span>
<span class="sd">| |    +--- s11 ----+   |                 |  +---- s21 -----+ | |</span>
<span class="sd">| |    | exit / a() |   |                 |  | entry / e()  | | |</span>
<span class="sd">| |    |            |   |                 |  |              | | |</span>
<span class="sd">| |    |            |   +- T [g()] / t() -&gt;  |              | | |</span>
<span class="sd">| |    +------------+   |                 |  +-----------/--+ | |</span>
<span class="sd">| |                     |                 |   *-- / d() -+    | |</span>
<span class="sd">| +---------------------+                 +-------------------+ |</span>
<span class="sd">+---------------------------------------------------------------+</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">spy_on</span><span class="p">,</span> <span class="n">pp</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">ActiveObject</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">signals</span><span class="p">,</span> <span class="n">Event</span><span class="p">,</span> <span class="n">return_status</span>

<span class="hll"><span class="nd">@spy_on</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">s_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="hll">  <span class="k">pass</span>
</span>
<span class="hll"><span class="nd">@spy_on</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">s1_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="hll">  <span class="k">pass</span>
</span>
<span class="hll"><span class="nd">@spy_on</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">s11_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="hll">  <span class="k">pass</span>
</span>
<span class="hll"><span class="nd">@spy_on</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">s2_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="hll">  <span class="k">pass</span>
</span>
<span class="hll"><span class="nd">@spy_on</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">s21_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="hll">  <span class="k">pass</span>
</span></pre></div>
</div>
</div>
<div class="section" id="code-add-common-internal-state-code">
<span id="scribbleexample-from-diagram-to-code-fourth-pass"></span><h2>Code, Add Common Internal State Code<a class="headerlink" href="#code-add-common-internal-state-code" title="Permalink to this headline">¶</a></h2>
<p>Now I add the internal-event-handling code into each of the state
methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">+----------------------------- s -------------------------------+</span>
<span class="sd">| +-------- s1 ---------+                 +-------- s2 -------+ |</span>
<span class="sd">| | exit / b()          |                 | entry / c()       | |</span>
<span class="sd">| |    +--- s11 ----+   |                 |  +---- s21 -----+ | |</span>
<span class="sd">| |    | exit / a() |   |                 |  | entry / e()  | | |</span>
<span class="sd">| |    |            |   |                 |  |              | | |</span>
<span class="sd">| |    |            |   +- T [g()] / t() -&gt;  |              | | |</span>
<span class="sd">| |    +------------+   |                 |  +-----------/--+ | |</span>
<span class="sd">| |                     |                 |   *-- / d() -+    | |</span>
<span class="sd">| +---------------------+                 +-------------------+ |</span>
<span class="sd">+---------------------------------------------------------------+</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">spy_on</span><span class="p">,</span> <span class="n">pp</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">ActiveObject</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">signals</span><span class="p">,</span> <span class="n">Event</span><span class="p">,</span> <span class="n">return_status</span>

<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="hll">  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>
</span><span class="hll">
</span><span class="hll">  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">else</span><span class="p">:</span>
</span><span class="hll">    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">top</span>
</span><span class="hll">  <span class="k">return</span> <span class="n">status</span>
</span>
<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s1_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="hll">  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>
</span><span class="hll">
</span><span class="hll">  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">else</span><span class="p">:</span>
</span><span class="hll">    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">top</span>
</span><span class="hll">  <span class="k">return</span> <span class="n">status</span>
</span>
<span class="nd">@spy_on</span>
<span class="hll"><span class="k">def</span> <span class="nf">s11_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="hll">  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>
</span><span class="hll">
</span><span class="hll">  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">else</span><span class="p">:</span>
</span><span class="hll">    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">top</span>
</span><span class="hll">  <span class="k">return</span> <span class="n">status</span>
</span>
<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s2_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="hll">  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>
</span><span class="hll">
</span><span class="hll">  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">else</span><span class="p">:</span>
</span><span class="hll">    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">top</span>
</span><span class="hll">  <span class="k">return</span> <span class="n">status</span>
</span>
<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s21_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="hll">  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>
</span><span class="hll">
</span><span class="hll">  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
</span><span class="hll">  <span class="k">else</span><span class="p">:</span>
</span><span class="hll">    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">top</span>
</span><span class="hll">  <span class="k">return</span> <span class="n">status</span>
</span></pre></div>
</div>
</div>
<div class="section" id="code-add-hiearchy">
<span id="scribbleexample-from-diagram-to-code-fifth-pass"></span><h2>Code, Add Hiearchy<a class="headerlink" href="#code-add-hiearchy" title="Permalink to this headline">¶</a></h2>
<p>Then I add the hierarchy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">+----------------------------- s -------------------------------+</span>
<span class="sd">| +-------- s1 ---------+                 +-------- s2 -------+ |</span>
<span class="sd">| | exit / b()          |                 | entry / c()       | |</span>
<span class="sd">| |    +--- s11 ----+   |                 |  +---- s21 -----+ | |</span>
<span class="sd">| |    | exit / a() |   |                 |  | entry / e()  | | |</span>
<span class="sd">| |    |            |   |                 |  |              | | |</span>
<span class="sd">| |    |            |   +- T [g()] / t() -&gt;  |              | | |</span>
<span class="sd">| |    +------------+   |                 |  +-----------/--+ | |</span>
<span class="sd">| |                     |                 |   *-- / d() -+    | |</span>
<span class="sd">| +---------------------+                 +-------------------+ |</span>
<span class="sd">+---------------------------------------------------------------+</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">spy_on</span><span class="p">,</span> <span class="n">pp</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">ActiveObject</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">signals</span><span class="p">,</span> <span class="n">Event</span><span class="p">,</span> <span class="n">return_status</span>

<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
<span class="hll">    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">top</span>
</span>  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s1_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">a</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
<span class="hll">    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s_state</span>
</span>  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s11_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s1_state</span>
<span class="hll">  <span class="k">return</span> <span class="n">status</span>
</span>

<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s2_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s_state</span>
<span class="hll">  <span class="k">return</span> <span class="n">status</span>
</span>

<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s21_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s2_state</span>
<span class="hll">  <span class="k">return</span> <span class="n">status</span>
</span></pre></div>
</div>
</div>
<div class="section" id="code-add-the-t-and-init-events">
<span id="scribbleexample-from-diagram-to-code-sixth-pass"></span><h2>Code, Add the T and Init events<a class="headerlink" href="#code-add-the-t-and-init-events" title="Permalink to this headline">¶</a></h2>
<p>Now I’ll add management for the <code class="docutils literal notranslate"><span class="pre">T</span></code> event in state <code class="docutils literal notranslate"><span class="pre">s1</span></code> event and the
<code class="docutils literal notranslate"><span class="pre">init</span></code> event needed in <code class="docutils literal notranslate"><span class="pre">s2</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">+----------------------------- s -------------------------------+</span>
<span class="sd">| +-------- s1 ---------+                 +-------- s2 -------+ |</span>
<span class="sd">| | exit / b()          |                 | entry / c()       | |</span>
<span class="sd">| |    +--- s11 ----+   |                 |  +---- s21 -----+ | |</span>
<span class="sd">| |    | exit / a() |   |                 |  | entry / e()  | | |</span>
<span class="sd">| |    |            |   |                 |  |              | | |</span>
<span class="sd">| |    |            |   +- T [g()] / t() -&gt;  |              | | |</span>
<span class="sd">| |    +------------+   |                 |  +-----------/--+ | |</span>
<span class="sd">| |                     |                 |   *-- / d() -+    | |</span>
<span class="sd">| +---------------------+                 +-------------------+ |</span>
<span class="sd">+---------------------------------------------------------------+</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">spy_on</span><span class="p">,</span> <span class="n">pp</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">ActiveObject</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">signals</span><span class="p">,</span> <span class="n">Event</span><span class="p">,</span> <span class="n">return_status</span>

<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">top</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s1_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">a</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
<span class="hll">  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">T</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">chart</span><span class="o">.</span><span class="n">trans</span><span class="p">(</span><span class="n">s2_state</span><span class="p">)</span>
</span>  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s11_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s1_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s2_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
<span class="hll">  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">INIT_SIGNAL</span><span class="p">):</span>
</span><span class="hll">    <span class="n">status</span> <span class="o">=</span> <span class="n">chart</span><span class="o">.</span><span class="n">trans</span><span class="p">(</span><span class="n">s21_state</span><span class="p">)</span>
</span>  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s21_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s2_state</span>
  <span class="k">return</span> <span class="n">status</span>
</pre></div>
</div>
</div>
<div class="section" id="code-see-if-anything-runs">
<span id="scribbleexample-from-diagram-to-code-eighth-pass"></span><h2>Code, See if anything Runs<a class="headerlink" href="#code-see-if-anything-runs" title="Permalink to this headline">¶</a></h2>
<p>Now it is time to turn on this hierarchy by giving it to an active object and
seeing what happens:</p>
<p>Notice, we sleep for a very short time to let the active object thread detect that
it has received an instruction.</p>
<p id="scribbleexample">When we run this code it outputs:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;START&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SEARCH_FOR_SUPER_SIGNAL:s11_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SEARCH_FOR_SUPER_SIGNAL:s1_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SEARCH_FOR_SUPER_SIGNAL:s_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ENTRY_SIGNAL:s_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ENTRY_SIGNAL:s1_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ENTRY_SIGNAL:s11_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;INIT_SIGNAL:s11_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;&lt;- Queued:(0) Deferred:(0)&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Good, our start is structured well enough that it can run.</p>
</div>
<div class="section" id="code-add-the-guard-and-t-function">
<span id="scribbleexample-from-diagram-to-code-ninth-pass"></span><h2>Code, Add the guard and t function<a class="headerlink" href="#code-add-the-guard-and-t-function" title="Permalink to this headline">¶</a></h2>
<p>Now lets add the guard function <code class="docutils literal notranslate"><span class="pre">g</span></code> and the <code class="docutils literal notranslate"><span class="pre">t</span></code> function into s1_state,
this will build this part of the picture:</p>
<a class="reference external image-reference" href="_static/guard.pdf"><div align="center" class="align-center"><img alt="_images/guard.svg" src="_images/guard.svg" /></div>
</a>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">+----------------------------- s -------------------------------+</span>
<span class="sd">| +-------- s1 ---------+                 +-------- s2 -------+ |</span>
<span class="sd">| | exit / b()          |                 | entry / c()       | |</span>
<span class="sd">| |    +--- s11 ----+   |                 |  +---- s21 -----+ | |</span>
<span class="sd">| |    | exit / a() |   |                 |  | entry / e()  | | |</span>
<span class="sd">| |    |            |   |                 |  |              | | |</span>
<span class="sd">| |    |            |   +- T [g()] / t() -&gt;  |              | | |</span>
<span class="sd">| |    +------------+   |                 |  +-----------/--+ | |</span>
<span class="sd">| |                     |                 |   *-- / d() -+    | |</span>
<span class="sd">| +---------------------+                 +-------------------+ |</span>
<span class="sd">+---------------------------------------------------------------+</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">spy_on</span><span class="p">,</span> <span class="n">pp</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">ActiveObject</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">signals</span><span class="p">,</span> <span class="n">Event</span><span class="p">,</span> <span class="n">return_status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">top</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s1_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="hll">  <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
</span><span class="hll">    <span class="n">chart</span><span class="o">.</span><span class="n">scribble</span><span class="p">(</span><span class="s2">&quot;Running g() -- the guard, which returns True&quot;</span><span class="p">)</span>
</span><span class="hll">    <span class="k">return</span> <span class="bp">True</span>
</span><span class="hll">
</span><span class="hll">  <span class="k">def</span> <span class="nf">t</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
</span><span class="hll">    <span class="n">chart</span><span class="o">.</span><span class="n">scribble</span><span class="p">(</span><span class="s2">&quot;Running t() -- function run on event T&quot;</span><span class="p">)</span>
</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
      <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
<span class="hll">  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">T</span><span class="p">):</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">g</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
</span><span class="hll">      <span class="n">t</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
</span><span class="hll">      <span class="n">status</span> <span class="o">=</span> <span class="n">chart</span><span class="o">.</span><span class="n">trans</span><span class="p">(</span><span class="n">s2_state</span><span class="p">)</span>
</span>  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s11_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s1_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s2_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">INIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">chart</span><span class="o">.</span><span class="n">trans</span><span class="p">(</span><span class="n">s21_state</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s21_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s2_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
  <span class="n">ao</span> <span class="o">=</span> <span class="n">ActiveObject</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;T_question&quot;</span><span class="p">)</span>
  <span class="n">ao</span><span class="o">.</span><span class="n">start_at</span><span class="p">(</span><span class="n">s11_state</span><span class="p">)</span>
  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
  <span class="n">pp</span><span class="p">(</span><span class="n">ao</span><span class="o">.</span><span class="n">spy</span><span class="p">())</span>
</pre></div>
</div>
<p>The guard condition totally makes sense when you look it it in Python.</p>
<p>Functions <code class="docutils literal notranslate"><span class="pre">g</span></code> and <code class="docutils literal notranslate"><span class="pre">t</span></code> use the chart’s <code class="docutils literal notranslate"><span class="pre">scribble</span></code> method which puts little
notes directly into the spy output log.  We do this so that our tests will
reveal exactly when <code class="docutils literal notranslate"><span class="pre">g</span></code> and <code class="docutils literal notranslate"><span class="pre">t</span></code> are called by the event processor.</p>
</div>
<div class="section" id="code-add-the-other-functions">
<span id="scribbleexample-from-diagram-to-code-tenth-pass"></span><h2>Code, Add the other functions<a class="headerlink" href="#code-add-the-other-functions" title="Permalink to this headline">¶</a></h2>
<p>Now let’s frame <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>. Notice we re-name the <code class="docutils literal notranslate"><span class="pre">e</span></code>
function to <code class="docutils literal notranslate"><span class="pre">e_function</span></code> to avoid a name collision:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">+----------------------------- s -------------------------------+</span>
<span class="sd">| +-------- s1 ---------+                 +-------- s2 -------+ |</span>
<span class="sd">| | exit / b()          |                 | entry / c()       | |</span>
<span class="sd">| |    +--- s11 ----+   |                 |  +---- s21 -----+ | |</span>
<span class="sd">| |    | exit / a() |   |                 |  | entry / e()  | | |</span>
<span class="sd">| |    |            |   |                 |  |              | | |</span>
<span class="sd">| |    |            |   +- T [g()] / t() -&gt;  |              | | |</span>
<span class="sd">| |    +------------+   |                 |  +-----------/--+ | |</span>
<span class="sd">| |                     |                 |   *-- / d() -+    | |</span>
<span class="sd">| +---------------------+                 +-------------------+ |</span>
<span class="sd">+---------------------------------------------------------------+</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">spy_on</span><span class="p">,</span> <span class="n">pp</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">ActiveObject</span>
<span class="kn">from</span> <span class="nn">miros</span> <span class="kn">import</span> <span class="n">signals</span><span class="p">,</span> <span class="n">Event</span><span class="p">,</span> <span class="n">return_status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">top</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s1_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="hll">  <span class="k">def</span> <span class="nf">b</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
</span><span class="hll">    <span class="n">chart</span><span class="o">.</span><span class="n">scribble</span><span class="p">(</span><span class="s2">&quot;Running b()&quot;</span><span class="p">)</span>
</span>
  <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
    <span class="n">chart</span><span class="o">.</span><span class="n">scribble</span><span class="p">(</span><span class="s2">&quot;Running g() -- the guard, which returns True&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">True</span>

  <span class="k">def</span> <span class="nf">t</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
    <span class="n">chart</span><span class="o">.</span><span class="n">scribble</span><span class="p">(</span><span class="s2">&quot;Running t() -- function run on event T&quot;</span><span class="p">)</span>

  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
<span class="hll">    <span class="n">b</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
</span>    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">T</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">g</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
      <span class="n">t</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
      <span class="n">status</span> <span class="o">=</span> <span class="n">chart</span><span class="o">.</span><span class="n">trans</span><span class="p">(</span><span class="n">s2_state</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s11_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="hll">  <span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
</span><span class="hll">    <span class="n">chart</span><span class="o">.</span><span class="n">scribble</span><span class="p">(</span><span class="s2">&quot;Running a()&quot;</span><span class="p">)</span>
</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
<span class="hll">    <span class="n">a</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
</span>    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s1_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s2_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="hll">  <span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
</span><span class="hll">    <span class="n">chart</span><span class="o">.</span><span class="n">scribble</span><span class="p">(</span><span class="s2">&quot;running c()&quot;</span><span class="p">)</span>
</span>
<span class="hll">  <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
</span><span class="hll">    <span class="n">chart</span><span class="o">.</span><span class="n">scribble</span><span class="p">(</span><span class="s2">&quot;running d()&quot;</span><span class="p">)</span>
</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
<span class="hll">    <span class="n">c</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
</span>    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">INIT_SIGNAL</span><span class="p">):</span>
<span class="hll">    <span class="n">d</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
</span>    <span class="n">status</span> <span class="o">=</span> <span class="n">chart</span><span class="o">.</span><span class="n">trans</span><span class="p">(</span><span class="n">s21_state</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="nd">@spy_on</span>
<span class="k">def</span> <span class="nf">s21_state</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="hll">  <span class="k">def</span> <span class="nf">e_function</span><span class="p">(</span><span class="n">chart</span><span class="p">):</span>
</span><span class="hll">    <span class="n">chart</span><span class="o">.</span><span class="n">scribble</span><span class="p">(</span><span class="s2">&quot;running e()&quot;</span><span class="p">)</span>
</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">UNHANDLED</span>

  <span class="k">if</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">ENTRY_SIGNAL</span><span class="p">):</span>
<span class="hll">    <span class="n">e_function</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
</span>    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">elif</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">signal</span> <span class="o">==</span> <span class="n">signals</span><span class="o">.</span><span class="n">EXIT_SIGNAL</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">HANDLED</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">chart</span><span class="o">.</span><span class="n">temp</span><span class="o">.</span><span class="n">fun</span> <span class="o">=</span> <span class="n">return_status</span><span class="o">.</span><span class="n">SUPER</span><span class="p">,</span> <span class="n">s2_state</span>
  <span class="k">return</span> <span class="n">status</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
  <span class="n">ao</span> <span class="o">=</span> <span class="n">ActiveObject</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;T_question&quot;</span><span class="p">)</span>
  <span class="n">ao</span><span class="o">.</span><span class="n">start_at</span><span class="p">(</span><span class="n">s11_state</span><span class="p">)</span>

<span class="hll">  <span class="n">ao</span><span class="o">.</span><span class="n">clear_spy</span><span class="p">()</span>
</span><span class="hll">  <span class="n">ao</span><span class="o">.</span><span class="n">post_fifo</span><span class="p">(</span><span class="n">Event</span><span class="p">(</span><span class="n">signal</span><span class="o">=</span><span class="n">signals</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
</span><span class="hll">  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</span><span class="hll">  <span class="n">pp</span><span class="p">(</span><span class="n">ao</span><span class="o">.</span><span class="n">spy</span><span class="p">())</span>
</span></pre></div>
</td></tr></table></div>
</div>
<div class="section" id="challenging-our-hypothesis">
<h2>Challenging Our Hypothesis<a class="headerlink" href="#challenging-our-hypothesis" title="Permalink to this headline">¶</a></h2>
<p>Let’s bring our question and our hypothesis back into view so we can think
about it again:</p>
<p>“Suppose we started the above chart in <code class="docutils literal notranslate"><span class="pre">s11</span></code>, then we send a <code class="docutils literal notranslate"><span class="pre">T</span></code> event to it,
when would each of the functions, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">t</span></code> happen?”</p>
<a class="reference external image-reference" href="_static/scribble.pdf"><div align="center" class="align-center"><img alt="_images/scribble.svg" src="_images/scribble.svg" /></div>
</a>
<p>Our answer:
<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">g()</span> <span class="pre">returns</span> <span class="pre">True,</span> <span class="pre">then</span> <span class="pre">the</span> <span class="pre">function</span> <span class="pre">order</span> <span class="pre">will</span> <span class="pre">be:</span></code> <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code></p>
<p>Let’s examine my own personal psychological state.  I have been taking tiny
steps to keep my cognitive load light, and right now I’m feeling pretty good.
I have a theory, but more importantly I have built up some firm reality outside
of myself that I can push against.  My sense of possession has transfered from
my answer into the structure that will be used to attack this answer.</p>
<p>Moreover, I feel a sense of control and I’m feeling satisfaction from building
something.  The part of my mind that gets a buzz from pursuit, from seeking is
activated and I’m feeling ready to grok something about these statecharts.</p>
<p>If you have actually been doing the work and debugging your own code, well,
maybe you feel this too.</p>
<p>Now, let’s pull the trigger and see what happens.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;T:s11_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;T:s1_state&#39;</span><span class="p">,</span>
<span class="hll"> <span class="s1">&#39;Running g() -- the guard, which return True&#39;</span><span class="p">,</span>
</span><span class="hll"> <span class="s1">&#39;Running t() -- function run on event T&#39;</span><span class="p">,</span>
</span> <span class="s1">&#39;EXIT_SIGNAL:s11_state&#39;</span><span class="p">,</span>
<span class="hll"> <span class="s1">&#39;Running a()&#39;</span><span class="p">,</span>
</span> <span class="s1">&#39;SEARCH_FOR_SUPER_SIGNAL:s11_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SEARCH_FOR_SUPER_SIGNAL:s2_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SEARCH_FOR_SUPER_SIGNAL:s1_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EXIT_SIGNAL:s1_state&#39;</span><span class="p">,</span>
<span class="hll"> <span class="s1">&#39;Running b()&#39;</span><span class="p">,</span>
</span> <span class="s1">&#39;ENTRY_SIGNAL:s2_state&#39;</span><span class="p">,</span>
<span class="hll"> <span class="s1">&#39;running c()&#39;</span><span class="p">,</span>
</span> <span class="s1">&#39;INIT_SIGNAL:s2_state&#39;</span><span class="p">,</span>
<span class="hll"> <span class="s1">&#39;running d()&#39;</span><span class="p">,</span>
</span> <span class="s1">&#39;SEARCH_FOR_SUPER_SIGNAL:s21_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ENTRY_SIGNAL:s21_state&#39;</span><span class="p">,</span>
<span class="hll"> <span class="s1">&#39;running e()&#39;</span><span class="p">,</span>
</span> <span class="s1">&#39;INIT_SIGNAL:s21_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;&lt;- Queued:(0) Deferred:(0)&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Look, it’s different.  We got an order of: <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>,
<code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>.</p>
<p>The answer:
<code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>.</p>
<p>Now let’s see what happens when we adjust the <code class="docutils literal notranslate"><span class="pre">g</span></code> function to return a False:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;T:s11_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;T:s1_state&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Running g() -- the guard, which return False&#39;</span><span class="p">,</span>
 <span class="s1">&#39;&lt;- Queued:(0) Deferred:(0)&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Now that we understand that, let’s re-ask the question:</p>
<p>“Suppose we started the above chart in <code class="docutils literal notranslate"><span class="pre">s11</span></code>, then we send a <code class="docutils literal notranslate"><span class="pre">T</span></code> event to it,
when would each of the functions, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">t</span></code> happen?”</p>
<a class="reference external image-reference" href="_static/scribble.pdf"><div align="center" class="align-center"><img alt="_images/scribble.svg" src="_images/scribble.svg" /></div>
</a>
<ol class="arabic simple">
<li>If g() returns False, only <code class="docutils literal notranslate"><span class="pre">g</span></code> is called</li>
<li>If g() returns True, then <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>.</li>
</ol>
<p>We know this, because we just confirmed the behavior.</p>
</div>
<div class="section" id="learning-for-my-mistake">
<h2>Learning for my Mistake<a class="headerlink" href="#learning-for-my-mistake" title="Permalink to this headline">¶</a></h2>
<p>If you are deeply familiar with the UML specification for statecharts, you will
see that our observed behavior is an infraction.  The original answer was
supposed to describe the behavior.  The good news is that this event processor
algorithm is based on the work of Miros Samek.</p>
<a class="reference external image-reference" href="_static/scribble.pdf"><div align="center" class="align-center"><img alt="_images/scribble.svg" src="_images/scribble.svg" /></div>
</a>
<p>On pages 80-81 of his book titled <a class="reference external" href="https://www.amazon.ca/Practical-UML-Statecharts-Event-Driven-Programming/dp/0750687061/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1510515714&amp;sr=1-1&amp;dpID=51Uq%252BHZ9L-L&amp;preST=_SX198_BO1,204,203,200_QL40_&amp;dpSrc=srch">Practical UML Statecharts in C/C++ Second
Edition</a> he wrote:</p>
<blockquote>
<div><p>One big problem with UML transition sequence is that it requires executing
actions associated with the transition <cite>after</cite> destroying the source state
configuration but before creating the target state configuration.  In the
analogy between exit actions in state machines and destructors in OOP, this
situation corresponds to executing a class method after partially destroying an
object.  Of course, such action is illegal in OOP.  As it turns out, it is also
particularly awkward to implement for state machines.</p>
<p>Executing actions associated with a transition is much more natural in the
context of the source state – the same context in which the guard condition is
evaluated.  Only after the guard and the transition actions execute, the source
state configuration is exited and the target state configuration is entered
<cite>atomically</cite>.  That way the state machine is observable only in a safe state
configuration, either before or after the transition, but not in the middle.</p>
</div></blockquote>
<p>So, our <code class="docutils literal notranslate"><span class="pre">t</span></code> function runs within the context of the thing that asked for the
transition.  This keeps it out of the strange limbo state described above.</p>
<p>Let’s think about how we could re-adjust our thinking, by re-asking the
question and considering how we could approach it the next time we see
something like it.</p>
<p>“Suppose we started the above chart in <code class="docutils literal notranslate"><span class="pre">s11</span></code>, then we send a <code class="docutils literal notranslate"><span class="pre">T</span></code> event to it,
when would each of the functions, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">t</span></code> happen?”</p>
<a class="reference external image-reference" href="_static/scribble.pdf"><div align="center" class="align-center"><img alt="_images/scribble.svg" src="_images/scribble.svg" /></div>
</a>
<p>Knowing that the source state of our <code class="docutils literal notranslate"><span class="pre">T</span></code> event was <strong>s11</strong> you would first
re-imagine the diagram as:</p>
<a class="reference external image-reference" href="_static/scribble2.pdf"><div align="center" class="align-center"><img alt="_images/scribble2.svg" src="_images/scribble2.svg" /></div>
</a>
<p>Then the answer to the question would just reveal itself from your imagined diagram:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code> if <code class="docutils literal notranslate"><span class="pre">g</span></code> returns True</li>
<li><code class="docutils literal notranslate"><span class="pre">g</span></code> if <code class="docutils literal notranslate"><span class="pre">g</span></code> returns False</li>
</ul>
<p><a class="reference internal" href="examples.html#examples"><span class="std std-ref">back to examples</span></a></p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>The S1 rectangle containing the two small rectangles with a line between them is short hand for a composite state</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="index.html">
  <img class="logo_a" src="_static/miros_a.svg" width="250" alt="Logo" >
</a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Hacking to Learn</a><ul>
<li><a class="reference internal" href="#a-picture-and-a-question">A Picture and a Question</a></li>
<li><a class="reference internal" href="#a-partial-answer">A Partial Answer</a></li>
<li><a class="reference internal" href="#a-better-answer">A Better Answer</a></li>
<li><a class="reference internal" href="#our-first-working-hypothesis">Our First Working Hypothesis</a></li>
<li><a class="reference internal" href="#code-make-a-picture">Code, Make a Picture</a></li>
<li><a class="reference internal" href="#code-required-imports">Code, Required Imports</a></li>
<li><a class="reference internal" href="#code-frame-in-the-states">Code, Frame in the States</a></li>
<li><a class="reference internal" href="#code-add-common-internal-state-code">Code, Add Common Internal State Code</a></li>
<li><a class="reference internal" href="#code-add-hiearchy">Code, Add Hiearchy</a></li>
<li><a class="reference internal" href="#code-add-the-t-and-init-events">Code, Add the T and Init events</a></li>
<li><a class="reference internal" href="#code-see-if-anything-runs">Code, See if anything Runs</a></li>
<li><a class="reference internal" href="#code-add-the-guard-and-t-function">Code, Add the guard and t function</a></li>
<li><a class="reference internal" href="#code-add-the-other-functions">Code, Add the other functions</a></li>
<li><a class="reference internal" href="#challenging-our-hypothesis">Challenging Our Hypothesis</a></li>
<li><a class="reference internal" href="#learning-for-my-mistake">Learning for my Mistake</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="examples.html">Examples</a><ul>
      <li>Previous: <a href="thread_safe_attributes.html" title="previous chapter">Thread Safe Attributes</a></li>
      <li>Next: <a href="interactingcharts.html" title="next chapter">Interacting Statecharts (Same Machine)</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/scribbleexample.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Scott Volk.
      
      |
      <a href="_sources/scribbleexample.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>