







<!DOCTYPE html>
<html  lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Active Object | miros</title>
    <link rel="shortcut icon" href="_static/favicon.ico">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css">
    <link rel="stylesheet" href="_static/theme.css" type="text/css">
    
      
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      
    
      
    <link rel="stylesheet" type="text/css" href="_static/theme.css" />
      
    
      
    <link rel="stylesheet" type="text/css" href="_static/css/miros_docs.css" />
      
    
    

    
    <script type="text/javascript" src="_static/theme.js" defer></script>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    
    <script src="_static/jquery.js"></script>
    
    <script src="_static/underscore.js"></script>
    
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    
    <script src="_static/doctools.js"></script>
    
    

    
      
      
    <link rel="index" title="Index" href="genindex.html">
      
      
    <link rel="search" title="Search" href="search.html">
      
      
      
      
    <link rel="prev" title="Events" href="event.html">
      
    

    

    

    
  </head>

  <body>
    <header class="main-header">
      <div class="navbar">
        <div id="js-sidebar-mask" class="sidebar-mask"></div>
        <div id="js-sidebar-menu-button" class="sidebar-menu-button">
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg>
        </div>
        <a href="index.html" class="site-link">
          
          miros
          
        </a>
        <div class="navbar-links">
          <a href="installation.html" class="navbar-link">Docs</a>
          
          <a href="https://github.com/aleph2c/miros" class="navbar-link">GitHub</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg>
          
        </div>
      </div>
    </header>

    <main class="main-wrapper">
      
      <div id="js-main-sidebar" class="main-sidebar">
        
        <div class="sidebar-content sidebar-content--divider sidebar-navbar-links">
          <a href="https://github.com/aleph2c/miros" class="sidebar-navbar-link">GitHub</a>
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg>
        </div>
        
        
        <div class="sidebar-content sidebar-logo">
    <a href="index.html">
      <img class="logo" src="_static/miros_logo.svg" alt="miros" >
    </a>
</div>
        
        

<h2 class="sidebar-heading">Contents</h2>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="zero_to_one.html">Tutorial: Zero to One</a></li>
<li class="toctree-l1"><a class="reference internal" href="reading_diagrams.html">Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="reflection.html">Reflection</a></li>
<li class="toctree-l1"><a class="reference internal" href="patterns.html">Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="architecture.html">Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hsm.html">Hsm</a></li>
<li class="toctree-l2"><a class="reference internal" href="event.html">Events</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Active Object</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#active-fabric">Active Fabric</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Active Object</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        
        
<h2 class="sidebar-heading">Useful Links</h2>

<ul>
  <li><a href="https://github.com/aleph2c/py-activeobject">miros on github</a></li>
  <li><a href="https://github.com/aleph2c/sequence">sequence on github</a></li>
  <li><a href="https://aleph2c.github.io/miros-rabbitmq/html/index.html">miros-rabbitmq plugin</a></li>
  <li><a href="http://www.umlet.com">UMLet Download</a></li>
  <li><a href="http://www.inf.ed.ac.uk/teaching/courses/seoc/2005_2006/resources/statecharts.pdf">formalism explained</a></li>
</ul>


<h2 class="sidebar-heading">For Embedded</h2>

<ul>
  <li><a href="https://state-machine.com/">Quantum Leaps for Embedded</a></li>
  <li><a href="https://github.com/QuantumLeaps/">Quantum Leaps On Github</a></li>
</ul>


<h2 class="sidebar-heading">Statechart Videos</h2>

<ul>
  <li><a href="https://www.mathworks.com/videos/understanding-state-machines-what-are-they-1-of-4-90488.html">Part 1 (What)</a></li>
  <li><a href="https://www.mathworks.com/videos/understanding-state-machines-why-use-them-2-of-4-90489.html">Part 2 (Why)</a></li>
  <li><a href="https://www.mathworks.com/videos/understanding-state-machines-what-are-they-1-of-4-90488.html">Part 3 (Mealy/Moore)</a></li>
  <li><a href="https://www.mathworks.com/videos/understanding-state-machines-harel-state-machines-4-of-4-90491.html">Part 4 (Harel Statecharts)</a></li>
  <li><a href="https://barrgroup.com/Embedded-Systems/How-To/Introduction-Hierarchical-State-Machines">Introduction to HSMs</a></li>
</ul>
        
        

<div id="searchbox" style="display: none" role="search">
  <h2 id="searchlabel" class="sidebar-heading">Quick search</h2>
  <div class="searchformwrapper sidebar-content">
    <form class="search" action="search.html" method="get">
      <input class="sidebar-search sidebar-search--input" type="text" name="q" aria-labelledby="searchlabel"><input class="sidebar-search sidebar-search--btn" type="submit" value="Go">
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>

        
      </div>
      

      
      <div class="main-content main-content--sidebar">
      
        
          
  <section id="module-miros.activeobject">
<span id="active-object"></span><h1>Active Object<a class="headerlink" href="#module-miros.activeobject" title="Permalink to this heading">#</a></h1>
<section id="active-fabric">
<h2>Active Fabric<a class="headerlink" href="#active-fabric" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="miros.activeobject.ActiveFabricSource">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">miros.activeobject.</span></span><span class="sig-name descname"><span class="pre">ActiveFabricSource</span></span><a class="headerlink" href="#miros.activeobject.ActiveFabricSource" title="Permalink to this definition">#</a></dt>
<dd><p>A (pub-sub) event dispatcher for active objects.</p>
<dl>
<dt>To create it:</dt><dd><p>af = ActiveFabric()  # it is a singleton</p>
</dd>
<dt>To subscribe (do this before starting it):</dt><dd><p>client_deque = deque(maxlen=10)
event_a      = HsmEvent(signal=signals.A)
af.subscribe(client_deque, event_a, queue_type=’fifo’)</p>
</dd>
<dt>To publish with priority:</dt><dd><p>event_a = HsmEvent(signal=signals.A)
af.publish(event_a, priority=1) # where 1 has the highest priorty</p>
<blockquote>
<div><p># by default the priorty is set to 1000</p>
</div></blockquote>
</dd>
</dl>
<p>To be greedy, and ensure your messages take priority over everything, publish
with a very high priority and subscribe using the lifo technique:</p>
<blockquote>
<div><p>client_deque = deque(maxlen=10)
event_a      = HsmEvent(signal=signals.A)</p>
<p># By subscribing with the ‘lifo’ technique, any publishing event that this
# deque item cares about will be placed at the front of the queue
af.subscribe(client_deque, event_a, queue_type=’lifo’)</p>
<p># By publishing with a priority 1, the supporting tasks checking the active
# fabric will ignore all queue items of lower priority and dispatch this
# event first.
af.publish(event_a, priority=1)</p>
</div></blockquote>
<p>Typically the active fabric is started by the first active object that is
started.  The active fabric is a singleton, so that all active objects can
communicate with each other by communicating to it.</p>
<p>The tasks managed by this class can be started and stopped (needed for
testing)  It does this by NOT inheriting from the threading class, instead it
uses the a more primative approach of keeping an internal object that is a thread
which can be killed and restarted.</p>
<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveFabricSource.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveFabricSource.clear" title="Permalink to this definition">#</a></dt>
<dd><p>clear out all subscriptions and queues</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveFabricSource.publish">
<span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveFabricSource.publish" title="Permalink to this definition">#</a></dt>
<dd><p>publish an event with a given priority to all subscribed queues</p>
<p>Priority of 1 is the highest priority</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveFabricSource.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveFabricSource.start" title="Permalink to this definition">#</a></dt>
<dd><p>start up the threads which manage the queues and subscription registry.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveFabricSource.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveFabricSource.stop" title="Permalink to this definition">#</a></dt>
<dd><p>stop the the threads in such a way that it can be restarted again</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveFabricSource.subscribe">
<span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_or_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveFabricSource.subscribe" title="Permalink to this definition">#</a></dt>
<dd><p>subscribe a queue to an event in a ‘fifo’ or ‘lifo’ way</p>
<dl class="simple">
<dt>There are two different ways to subscribe to an event:</dt><dd><ol class="arabic simple">
<li><p>first in first out - fifo priority queue</p></li>
<li><p>last in first out  - lifo priority queue</p></li>
</ol>
</dd>
</dl>
<p>Both methods 1 and 2 have tasks with associated priority queues.
The fifo/lifo action only takes place at the moment the managing task puts
an item into the external queue used as a registry object. For method 1, the
task puts the event on the last location in the queue.  For method 2, the
task puts the event at the beginning location of the queue.</p>
<p>Typically, you would use the same external deque object to subscribe to
events in the two different ways provided by this method.  This is best
explained with an example:</p>
<dl>
<dt>Example (FIFO):</dt><dd><p>active_object_input_queue = deque(maxlen=100) # LockingDeque works too
event_a = HsmEvent(signal=signals.A)
event_b = HsmEvent(signal=signals.B)</p>
<p># To show are fifo in action we first push something on our deque:
active_object_input_queue.append(event_a)</p>
<p># subscribe to b using the fifo technique
af = ActiveFabric()
af.subscribe(active_object_input_queue, event_b) # default to fifo
af.start()
af.publish(event_b)</p>
<p># show that our old item is still there
assert(active_object_input_queue.pop().signal_name == ‘A’)
# our new item was at the end of the list
assert(active_object_input_queue.pop().signal_name == ‘B’)</p>
</dd>
<dt>Example (LIFO):</dt><dd><p>active_object_input_queue = deque(maxlen=100) # LockingDeque works too
event_a = HsmEvent(signal=signals.A)
event_b = HsmEvent(signal=signals.B)</p>
<p># To show are lifo in action push something onto our deque:
active_object_input_queue.append(event_a)</p>
<p># subscribe to b using the lifo technique
af = ActiveFabric()
af.subscribe(active_object_input_queue, event_b, queue_type=’lifo’)
af.start()
af.publish(event_b)</p>
<p># show that the ‘lifo’ technique barged our event into the front of the list
assert(active_object_input_queue.pop().signal_name == ‘B’)
# our old event is still there
assert(active_object_input_queue.pop().signal_name == ‘A’)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveFabricSource.thread_runner_fifo">
<span class="sig-name descname"><span class="pre">thread_runner_fifo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fabric_task_event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fifo_queue</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fifo_subscriptions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveFabricSource.thread_runner_fifo" title="Permalink to this definition">#</a></dt>
<dd><p>If this was a Thread class this function would be called “run”</p>
<p>This is the main execution code of the thread.  It watches to see if the
HsmEvent() singleton has been cleared, if it has it exits its forever loop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveFabricSource.thread_runner_lifo">
<span class="sig-name descname"><span class="pre">thread_runner_lifo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fabric_task_event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lifo_queue</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lifo_subscriptions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveFabricSource.thread_runner_lifo" title="Permalink to this definition">#</a></dt>
<dd><p>If this was a Thread class this function would be called “run”</p>
<p>This is the main execution code of the thread.  It watches to see if the
HsmEvent() singleton has been cleared, if it has it exits its forever loop.</p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="miros.activeobject.ActiveFabric">
<span class="sig-prename descclassname"><span class="pre">miros.activeobject.</span></span><span class="sig-name descname"><span class="pre">ActiveFabric</span></span><a class="headerlink" href="#miros.activeobject.ActiveFabric" title="Permalink to this definition">#</a></dt>
<dd><p>alias of &lt;miros.singleton.SingletonDecorator object&gt;</p>
</dd></dl>

</section>
<section id="id1">
<h2>Active Object<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">miros.activeobject.</span></span><span class="sig-name descname"><span class="pre">ActiveObject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrumented</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.append_publish_to_spy">
<span class="sig-name descname"><span class="pre">append_publish_to_spy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.append_publish_to_spy" title="Permalink to this definition">#</a></dt>
<dd><p>instrument the rtc spy with our publish event</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.append_subscribe_to_spy">
<span class="sig-name descname"><span class="pre">append_subscribe_to_spy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.append_subscribe_to_spy" title="Permalink to this definition">#</a></dt>
<dd><p>instrument the full spy with our subscription request</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.cancel_event">
<span class="sig-name descname"><span class="pre">cancel_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.cancel_event" title="Permalink to this definition">#</a></dt>
<dd><p>This will cancel an event thread that was created using the __post_event api.
The original call to the __post_event api would have returned the uuid needed
to cancel it with this call.</p>
<p>If there are no threads managing the uuid provided, this method will do
nothing.</p>
<p>Example:</p>
<blockquote>
<div><dl class="simple">
<dt>post_id_1 = ao.post_fifo(Event(signal=signals.A),</dt><dd><p>time=15,
period=1.0,
deferred=True,
queue_type=’lifo’)</p>
</dd>
</dl>
<p>ao.cancel_event(post_id_1)</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.cancel_events">
<span class="sig-name descname"><span class="pre">cancel_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">e</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.cancel_events" title="Permalink to this definition">#</a></dt>
<dd><p>This will cancel all events that have the same signal name as e, that were
posted using the __post_event.</p>
<p>This will cancel all event threads which have the same signal name as ‘e’,
that were created using the __post_event api.</p>
<p>If there are no threads managing the signals name within the event
provided, this method will do nothing.</p>
<p>Example:</p>
<blockquote>
<div><dl class="simple">
<dt>post_id_1 = ao.post_fifo(Event(signal=signals.A),</dt><dd><p>time=15,
period=1.0,
deferred=True,
queue_type=’lifo’)</p>
</dd>
<dt>post_id_2 = ao.post_fifo(Event(signal=signals.A),</dt><dd><p>time=15,
period=1.0,
deferred=True,
queue_type=’lifo’)</p>
</dd>
</dl>
<p>ao.cancel_events(Event(signal=signals.A))</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.post_fifo">
<span class="sig-name descname"><span class="pre">post_fifo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">e</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">times</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferred</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.post_fifo" title="Permalink to this definition">#</a></dt>
<dd><p>post an event, or events to the fifo queue</p>
<dl>
<dt>Example of posting a single event into the fifo queue:</dt><dd><p>ao.post_fifo(Event(signal=signals.A))</p>
</dd>
<dt>Example create a short lived thread to post a one-shot event in one second:</dt><dd><p>thread_id = ao.post_fifo(Event(signal=signals.A), period=1.0, time=1, deferred=True)</p>
<p># to cancel this one shot
ao.cancel_event(thread_id)</p>
</dd>
<dt>Example to create a heart beat of 0.7 seconds starting in 0.7 seconds:</dt><dd><p>thread_id = ao.post_fifo(Event(signal=signals.A), period=0.7, deferred=True)</p>
<p># to kill this thread:
ao.cancel_event(thread_id)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.post_lifo">
<span class="sig-name descname"><span class="pre">post_lifo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">e</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">times</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferred</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.post_lifo" title="Permalink to this definition">#</a></dt>
<dd><p>post an event, or events to the lifo queue</p>
<dl>
<dt>Example of posting a single event into the lifo queue:</dt><dd><p>ao.post_lifo(Event(signal=signals.A))</p>
</dd>
<dt>Example create a short lived thread to post a one-shot event in one second:</dt><dd><p>thread_id = ao.post_lifo(Event(signal=signals.A), period=1.0, time=1, deferred=True)</p>
<p># to cancel this one shot
ao.cancel_event(thread_id)</p>
</dd>
<dt>Example to create a heart beat of 0.7 seconds starting in 0.7 seconds:</dt><dd><p>thread_id = ao.post_lifo(Event(signal=signals.A), period=0.7, deferred=True)</p>
<p># to kill this thread:
ao.cancel_event(thread_id)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.run_event">
<span class="sig-name descname"><span class="pre">run_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fabric_task_event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.run_event" title="Permalink to this definition">#</a></dt>
<dd><p>The active object threading function.</p>
<p>If this statechart has not been stopped and the active fabric hasn’t been
stopped the threading function will run.  If the active fabric has been
stopped, it will stop this thread as well by clearing the task_event
HsmEvent (threading.Event) object.</p>
<p>This threading method waits on the locking-deque.  If the signal is not a
STOP_ACTIVE_OBJECT_SIGNAL signal it calls the hsm next_rtc method, which will pop
the leftmost item out of the deque part of the locking-deque and dispatch it
into the hsm.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.start_at">
<span class="sig-name descname"><span class="pre">start_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initial_state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.start_at" title="Permalink to this definition">#</a></dt>
<dd><p>start the active object at a given state and begin its task</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.stop" title="Permalink to this definition">#</a></dt>
<dd><p>Stops the active object, can cancels all of its pending events</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.top">
<span class="sig-name descname"><span class="pre">top</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.top" title="Permalink to this definition">#</a></dt>
<dd><p>top most state given to all HSMs; treat it as an outside function</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="miros.activeobject.ActiveObject.trace">
<span class="sig-name descname"><span class="pre">trace</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#miros.activeobject.ActiveObject.trace" title="Permalink to this definition">#</a></dt>
<dd><p>Output state transition information only:</p>
<p>Example:
print(chart.trace())</p>
<blockquote>
<div><p>[05:23:25.314420] [&lt;state_name&gt;] start_at(): top-&gt;hsm_queues_graph_g1_s22
[05:23:25.314420] [&lt;state_name&gt;] D-&gt;(): hsm_queues_graph_g1_s22-&gt;hsm_queues_graph_g1_s1
[05:23:25.314420] [&lt;state_name&gt;] E-&gt;(): hsm_queues_graph_g1_s1-&gt;hsm_queues_graph_g1_s01
[05:23:25.314420] [&lt;state_name&gt;] F-&gt;(): hsm_queues_graph_g1_s01-&gt;hsm_queues_graph_g1_s2111
[05:23:25.314420] [&lt;state_name&gt;] A-&gt;(): hsm_queues_graph_g1_s2111-&gt;hsm_queues_graph_g1_s321</p>
</div></blockquote>
</dd></dl>

</dd></dl>

</section>
</section>


        
        <div class="main-content__right-sidebar">
          <h2 class="sidebar-heading">On this page:</h2>
        </div>
      </div>
    </main>

    <div class="footer-wrapper">
      
      <footer class="main-footer main-footer--sidebar">
      
        <div class="relational-links">
          <div>
            
            ← <a class="relational-link" href="event.html" title="previous chapter">Events</a>
            
          </div>
          <div>
            
          </div>
        </div>
        
        <div class="copyright">
          © Copyright <span class="js-year"></span>,
          
          <a href="https://github.com/aleph2c" class="copyright_link">Scott Volk</a>.
          
        </div>
        
        
        <div class="last-updated">
          <span class="prefix">Last updated:</span>
          <span class="time">May 26, 2024 6:24 PM</span>
        </div>
        
        
        <div class="created-with">
          Created using <a href="http://sphinx-doc.org/" class="copyright_link">Sphinx</a> 5.1.1 with <span class="theme">13ds_theme_one</span>.
        </div>
        
      </footer>
    </div>
  </body>
</html>